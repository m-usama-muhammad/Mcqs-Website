<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>quiz</title>
<style>
body {
  margin:0;
  font-family:Arial,sans-serif;
  background:url('https://images.unsplash.com/photo-1519389950473-47ba0277781c')no-repeat center center fixed;
  background-size:cover;
  display:flex; justify-content:center; align-items:center;
  min-height:100vh;
}
.quiz-container {
  background:linear-gradient(135deg,#e6f9e6,#ccf2cc);
  max-width:600px; width:90%; padding:30px; border-radius:30px;
  box-shadow:0 4px 25px rgba(0,0,0,0.3);
}
h1 { text-align:center; margin-bottom:20px; font-size:28px; color:#006600; }
label { font-weight:bold; color:#004d00; margin-right:20px; }
input[type="radio"] { margin-right:5px; }
button {
  background:#28a745; color:white; padding:10px 20px;
  border:none; border-radius:8px; cursor:pointer;
  margin-top:15px; font-size:16px; transition:0.3s;
}
button:hover { background:#218838; }
#thankYou {
  display:none; text-align:center; font-size:20px;
  font-weight:bold; color:#006600; margin-top:20px;
  white-space:pre-line;
}
</style>
</head>
<body>
<div class="quiz-container">
<h1>Quiz</h1>

<div id="timer" style="text-align:center; font-weight:bold; color:#d9534f; margin-bottom:10px;"></div>

<div id="nameBox" style="text-align:center;">
<label>Enter Your Name:</label><br><br>
<input type="text" id="studentName" placeholder="Enter Your Full Name"
style="padding:8px; width:70%; max-width:300px; border-radius:6px; border:1px solid #28a745;"><br><br>
<label><input type="radio" name="studentType" value="center"> Institute Student</label>
<label><input type="radio" name="studentType" value="other"> Others</label><br><br>
<button type="button" onclick="startQuiz()">Start Quiz</button>
</div>
<form id="quizForm" style="display:none; text-align:left; margin-top:20px;">
<p>Q1: 2 + 2 = ?</p>
<input type="radio" name="q1" value="3"> 3<br>
<input type="radio" name="q1" value="4"> 4<br>
<input type="radio" name="q1" value="5"> 5<br>
<p>Q2: Capital of Pakistan?</p>
<input type="radio" name="q2" value="Karachi"> Karachi<br>
<input type="radio" name="q2" value="Islamabad"> Islamabad<br>
<input type="radio" name="q2" value="Lahore"> Lahore<br><br>
<button type="button" onclick="submitQuiz()">Submit Quiz</button>
</form>
<p id="thankYou"></p>
</div>
<script>
let studentName = "", studentType = "";
let totalTime = 60 * 60; // global timer
let timer; // global interval

function startQuiz() {
  studentName = document.getElementById("studentName").value.trim();
  studentType = document.querySelector('input[name="studentType"]:checked')?.value;

  if (!studentName) {
    alert("Please enter your name!");
    return;
  }

  if (!studentType) {
    alert("Please select your type!");
    return;
  }

  startTimer(); // timer start
  document.getElementById("nameBox").style.display = "none";
  document.getElementById("quizForm").style.display = "block";
}

function startTimer() {
  const timerDiv = document.getElementById("timer");
  timer = setInterval(() => {
    let minutes = Math.floor(totalTime / 60);
    let seconds = totalTime % 60;
    timerDiv.textContent = `Time Left: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    totalTime--;

    if (totalTime < 0) {
      clearInterval(timer);
      autoSubmitQuiz();
    }
  }, 1000);
}

function autoSubmitQuiz() {
  submitQuiz(true);
}

function submitQuiz(auto = false) {
  clearInterval(timer); // timer stop submit ke baad

  let score = 0;
  const q1 = document.querySelector('input[name="q1"]:checked');
  const q2 = document.querySelector('input[name="q2"]:checked');

  // agar auto submit hai to blank answer par alert nahi ayega
  if (!auto && (!q1 || !q2)) {
    alert("Please answer all questions!");
    return;
  }

  if (q1?.value === "4") score++;
  if (q2?.value === "Islamabad") score++;

  if (studentType === "center") {
    const scriptURL = "https://script.google.com/macros/s/AKfycbwx9uytcd15ccTJ6Cj6uXPS-90bpT69C4gdAyrh8JCwouCcSlE7robGy8wZ09t74-1K/exec";
    const params = new URLSearchParams({
      name: studentName,
      score: score,
      type: studentType
    });
    fetch(`${scriptURL}?${params.toString()}`)
      .then(() => showThankYou(score, false))
      .catch(() => showThankYou(score, false));
  } else {
    showThankYou(score, true);
  }
}

function showThankYou(score, showScore) {
  document.getElementById("quizForm").style.display = "none";
  document.getElementById("timer").style.display = "none"; // timer hide
  const thankYou = document.getElementById("thankYou");
  thankYou.style.display = "block";

  if (studentType === "center") {
    thankYou.innerText = `Thank You For Attempting The Quiz\n${studentName}\nYour response has been recorded.`;
  } else {
    thankYou.innerText = `Thank You for attempting Quiz\n${studentName}\n\nResult:\nTotal Questions: 2\nCorrect Answers: ${score}\nWrong Answers: ${2 - score}`;
  }
}
</script>

</body>
</html>
